# Node.js IPC Battle Server é–‹ç™ºè¨ˆç”»æ›¸

## æ¦‚è¦

WebSocketé€šä¿¡ã‚’å®Œå…¨ã«æ’é™¤ã—ã€IPCã«ã‚ˆã‚‹é«˜é€Ÿãƒãƒˆãƒ«å‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹Node.js IPCã‚µãƒ¼ãƒãƒ¼ã®å®Œå…¨å®Ÿè£…è¨ˆç”»ã€‚Phase 4ã®æœ€çµ‚æ®µéšã¨ã—ã¦ã€æ—¢å­˜ã®IPCBattleã‚¯ãƒ©ã‚¹ã¨çµ±åˆã—ã€75%ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã‚’é”æˆã™ã‚‹ã€‚

### å‰æè¦ä»¶

- Node.jsãƒ—ãƒ­ã‚»ã‚¹ã¯ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã®Pokemon Showdownã‚µãƒ¼ãƒãƒ¼ã®å‹•ä½œã‚’ãƒˆãƒ¬ãƒ¼ã‚¹ã—ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ»ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’å®Œå…¨ã«å†ç¾ã—ã¦é€å—ä¿¡ã™ã‚‹ã“ã¨  
- IPCã‚µãƒ¼ãƒãƒ¼ã¯ã€æ—¢å­˜ã®WebSocketé€šä¿¡æ©Ÿèƒ½ã‚’æœ€å°é™ã«ç½®ãæ›ãˆã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã€å¯èƒ½ãªé™ã‚ŠShowdownæº–æ‹ ã®Node.jsãƒ—ãƒ­ã‚»ã‚¹ãŠã‚ˆã³poke-envï¼ˆEnvPlayerç›¸å½“ï¼‰ã®ä»•æ§˜ã‚’ãã®ã¾ã¾æ´»ç”¨ã™ã‚‹ã“ã¨
- ğŸš¨ **ä¸å®Œå…¨æƒ…å ±ã‚²ãƒ¼ãƒ è¦ä»¶**: å„ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒç‹¬ç«‹ã—ãŸBattleã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒã¡ã€MapleShowdownCoreãŒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å›ºæœ‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é©åˆ‡ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹ã“ã¨  

## ç¾çŠ¶åˆ†æ (2025å¹´7æœˆ30æ—¥æ™‚ç‚¹)

### âœ… å®Œæˆæ¸ˆã¿ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **åŸºæœ¬IPCã‚µãƒ¼ãƒãƒ¼æ§‹é€ **: `pokemon-showdown/sim/ipc-battle-server.js` (614è¡Œ)
- **Pythonå´IPCBattle**: `src/sim/ipc_battle.py` (244è¡Œ)
- **IPCBattleFactory**: `src/sim/ipc_battle_factory.py` (150è¡Œ)
- **ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ¢ãƒ¼ãƒ‰é€šä¿¡**: `src/sim/battle_communicator.py`
- **ç’°å¢ƒçµ±åˆ**: PokemonEnv full-ipcå¯¾å¿œæ¸ˆã¿

### ğŸ”§ å¿…è¦ãªä¿®æ­£ãƒ»æ”¹å–„
- **BattleStreamçµ±åˆ**: ç¾åœ¨ã®å®Ÿè£…ã¯ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒ¬ãƒ™ãƒ«
- **ãƒãƒ¼ãƒ ç®¡ç†**: Pokemonç¨®æ—æƒ…å ±ã®é©åˆ‡ãªå‡¦ç†
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**: ãƒãƒˆãƒ«é€²è¡ŒçŠ¶æ³ã®åŒæ–¹å‘åŒæœŸ
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ã®å …ç‰¢æ€§

### ğŸ“Š ç›®æ¨™æ€§èƒ½
- **é€šä¿¡é…å»¶**: 10-15ms â†’ 1-2ms (90%å‰Šæ¸›)
- **WebSocketæ’é™¤**: 11.7% â†’ 0% (å®Œå…¨æ’é™¤)
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: æ—¢å­˜+10%ä»¥å†…
- **å®‰å®šæ€§**: 100ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰é€£ç¶šå®Ÿè¡Œ

## æ®µéšçš„é–‹ç™ºè¨ˆç”»

### Phase A: Pokemon Showdownæ­£ç¢ºãªä»•æ§˜ç†è§£ãƒ»çµ±åˆ (4-6æ—¥)

#### A.1: BattleStream çµ±åˆã¨ IPC ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç† (2-3æ—¥)
**ç›®æ¨™**: BattleStream ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã«åˆã‚ã›ã¦æ­£ã—ãèµ·å‹•ã—ã€IPC ã‚µãƒ¼ãƒãƒ¼ãŒå—ã‘å–ã‚‹ JSON ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å†…éƒ¨ã§ BattleStream ã«æ¸¡ã™ã—ãã¿ã‚’å®Ÿè£…

**ä½œæ¥­å†…å®¹**:
1. **BattleStream ã®åˆæœŸåŒ–**
   ```javascript
   // ipc-battle-server.js å†…ã§ã®åˆæœŸåŒ–ä¾‹
   const { BattleStream } = require('../dist/sim/battle-stream');
   const battleStream = new BattleStream();
   // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: debug=false, noCatch=false, keepAlive=false, replay=false
   ```

2. **create_battle ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ BattleStream é€£æº**
   ```javascript
   // JSON å½¢å¼ã®ãƒãƒˆãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å—ä¿¡å¾Œã€BattleStream ã«æ¸¡ã™
   const battleOptions = {
     formatid: format,                 // e.g., 'gen9randombattle'
     seed: seed || undefined,
     p1: { name: players[0].name, team: players[0].team },
     p2: { name: players[1].name, team: players[1].team }
   };
   battleStream.write(JSON.stringify(battleOptions));
   ```

3. **BattleStream ãŒå†…éƒ¨ã§å‡¦ç†ã™ã‚‹ Showdown ãƒ—ãƒ­ãƒˆã‚³ãƒ«**
   - BattleStream._writeLines() ãŒ `>` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’æ¤œå‡ºã—ã€å†…éƒ¨ Battle ã‚¯ãƒ©ã‚¹ã«å¯¾ã—ã¦ start/player/p1/p2 ã‚³ãƒãƒ³ãƒ‰ã‚’ç™ºè¡Œ
   - BattleStream å†…éƒ¨ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆupdate/end ãªã©ï¼‰ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ãƒ»å‰å‡¦ç†

3. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ­£ç¢ºãªå®Ÿè£…**
   - `update\nMESSAGES`å½¢å¼ã®æ­£ç¢ºãªè§£æ
   - `sideupdate\nPLAYERID\nMESSAGES`ã®å€‹åˆ¥ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é€šä¿¡
   - `end\nLOGDATA`ã®ãƒãƒˆãƒ«çµ‚äº†å‡¦ç†

#### A.2: ãƒãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—ãƒ­ã‚¸ãƒƒã‚¯ (1-2æ—¥)
**ç›®æ¨™**: Python ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰æ¸¡ã•ã‚ŒãŸ team æ–‡å­—åˆ—ã‚’ BattleStream ã«æ­£ã—ãå¼•ãæ¸¡ã—ã€å†…éƒ¨ã§ teampreview ã‚’å«ã‚€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ç”Ÿæˆã§ãã‚‹ã‚ˆã†æ•´å‚™

**ä½œæ¥­å†…å®¹**:
1. create_battle ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å—ä¿¡ã—ãŸ players[].team ã‚’ battleOptions.p1.team / .p2.team ã«å«ã‚ã‚‹
2. battleStream.write(JSON.stringify(battleOptions)) ã® JSON å†…ã§ team ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ´»ç”¨ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
3. BattleStream å†…éƒ¨ã§ teampreview ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ï¼ˆ|clearpoke|, |poke|, |teampreview|ï¼‰ãŒæ­£ã—ãå‡ºåŠ›ã•ã‚Œã‚‹ã‹æ¤œè¨¼ãƒ»èª¿æ•´

**æˆæœç‰©**:
- æ”¹å–„ã•ã‚ŒãŸ ipc-battle-server.js ã®ãƒãƒ¼ãƒ é€£æºéƒ¨åˆ†
- ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆteam ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ãƒ¼ã‚±ãƒ³ã‚¹æ¤œè¨¼ï¼‰

**æ¤œè¨¼æ–¹æ³•**:
```bash
# create_battle ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ä¾‹
cd pokemon-showdown
echo '{"type":"create_battle","battle_id":"test","format":"gen9randombattle","players":[{"name":"p1","team":"<team>"},{"name":"p2","team":"<team>"}]}' \
  | node sim/ipc-battle-server.js

# æˆ»ã‚Šå€¤ã« battle_created ãŒå«ã¾ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
```


#### A.3: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ­ã‚°æ”¹å–„ (1æ—¥)
**ç›®æ¨™**: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ã®å …ç‰¢æ€§ç¢ºä¿

**ä½œæ¥­å†…å®¹**:
1. **åŒ…æ‹¬çš„ã‚¨ãƒ©ãƒ¼ã‚­ãƒ£ãƒƒãƒ**
   - Node.jså´ã®uncaughtExceptionå‡¦ç†
   - Pythonå´ã®IPCãƒ—ãƒ­ã‚»ã‚¹åœæ­¢æ¤œå‡º
   - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ»ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯å›é¿

2. **è©³ç´°ãƒ­ã‚°ãƒ»ãƒ‡ãƒãƒƒã‚°æƒ…å ±**
   - ãƒãƒˆãƒ«é€²è¡Œã®è©³ç´°ãƒˆãƒ¬ãƒ¼ã‚¹
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒã‚¤ãƒ³ãƒˆ
   - å•é¡Œç‰¹å®šã®ãŸã‚ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±

3. **è‡ªå‹•å›å¾©ãƒ¡ã‚«ãƒ‹ã‚ºãƒ **
   - ãƒ—ãƒ­ã‚»ã‚¹å†èµ·å‹•
   - çŠ¶æ…‹å¾©å…ƒ
   - ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«ãƒ»ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³

**æˆæœç‰©**:
- å …ç‰¢ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…
- åŒ…æ‹¬çš„ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- è‡ªå‹•å›å¾©ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### Phase B: å®Œå…¨Battle Protocolå®Ÿè£… (5-7æ—¥)

#### B.1: Choice Request Systemå®Œå…¨å®Ÿè£… (2-3æ—¥)
**ç›®æ¨™**: Pokemon Showdownã®é¸æŠã‚·ã‚¹ãƒ†ãƒ ã‚’100%å†ç¾

**é‡è¦ãªä»•æ§˜ç¢ºèª**:
- Choice requestã¯`sideupdate\np1\nREQUEST`å½¢å¼ã§é€ä¿¡
- REQUEST.activeã«è¡Œå‹•å¯èƒ½ãªæŠ€æƒ…å ±
- REQUEST.sideã«ãƒãƒ¼ãƒ å…¨ä½“ã®çŠ¶æ…‹æƒ…å ±
- RQID (request ID) ã«ã‚ˆã‚‹é‡è¤‡é˜²æ­¢ã‚·ã‚¹ãƒ†ãƒ 

**ä½œæ¥­å†…å®¹**:
1. **Requestè§£æãƒ»ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **
   ```javascript
   // Choice requestã®æ­£ç¢ºãªå‡¦ç†
   parseChoiceRequest(requestData) {
     const request = JSON.parse(requestData);
     return {
       rqid: request.rqid,
       active: request.active,  // è¡Œå‹•å¯èƒ½æŠ€ãƒ»å¯¾è±¡
       side: request.side,      // ãƒãƒ¼ãƒ çŠ¶æ…‹
       forceSwitch: request.forceSwitch || false
     };
   }
   ```

2. **Decision Validation System**
   ```javascript
   // æ­£ç¢ºãªè¡Œå‹•æ¤œè¨¼
   validateChoice(choice, request) {
     // move 1, switch 2, team 123456ç­‰ã®æ¤œè¨¼
     // å¯¾è±¡æŒ‡å®šã®æ¤œè¨¼ (+1, -1ç­‰)
     // Mega evolution, Z-move, Dynamaxåˆ¶ç´„
   }
   ```

3. **Turn Processingå®Œå…¨å®Ÿè£…**
   - ä¸¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è¡Œå‹•åé›†å¾…æ©Ÿ
   - å„ªå…ˆåº¦è¨ˆç®—ãƒ»åŒæ™‚å‡¦ç†
   - ã‚¿ãƒ¼ãƒ³çµæœã®æ­£ç¢ºãªé…ä¿¡

#### B.2: Protocol Messageå®Œå…¨å¯¾å¿œ (2-3æ—¥)
**ç›®æ¨™**: SIM-PROTOCOL.mdã®å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—ã«å¯¾å¿œ

**ä½œæ¥­å†…å®¹**:
1. **Major Actionså®Œå…¨å®Ÿè£…**
   ```javascript
   // |move|POKEMON|MOVE|TARGET
   // |switch|POKEMON|DETAILS|HP STATUS  
   // |drag|POKEMON|DETAILS|HP STATUS
   // |faint|POKEMON
   ```

2. **Minor ActionsåŒ…æ‹¬å¯¾å¿œ**
   ```javascript
   // |-damage|POKEMON|HP STATUS
   // |-heal|POKEMON|HP STATUS
   // |-status|POKEMON|STATUS
   // |-boost|POKEMON|STAT|AMOUNT
   // |-weather|WEATHER
   // |-fieldstart|CONDITION
   ```

3. **Battle Flow Management**
   - Team preview phaseå‡¦ç†
   - Turn-by-turn progression
   - Battle end conditions (win/tie)

**æˆæœç‰©**:
- å®Œå…¨å‹•ä½œã™ã‚‹ãƒãƒˆãƒ«ã‚¨ãƒ³ã‚¸ãƒ³
- å…¨è¡Œå‹•ã‚¿ã‚¤ãƒ—å¯¾å¿œ
- ãƒãƒˆãƒ«çŠ¶æ…‹åŒæœŸã‚·ã‚¹ãƒ†ãƒ 

**æ¤œè¨¼æ–¹æ³•**:
```javascript
// Node.jså´ãƒ†ã‚¹ãƒˆ
const battle = createBattle('test', 'gen9randombattle', players);
battle.stream.write('>p1 move 1');
const updates = battle.stream.read();
console.log('Battle updates:', updates);
```

#### B.2: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒˆãƒ«é€²è¡Œã‚·ã‚¹ãƒ†ãƒ  (1-2æ—¥)
**ç›®æ¨™**: Pythonã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®å®Œå…¨åŒæœŸ

**ä½œæ¥­å†…å®¹**:
1. **ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹é€²è¡Œç®¡ç†**
   - ä¸¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è¡Œå‹•å¾…ã¡
   - åŒæ™‚å®Ÿè¡Œã®é©åˆ‡ãªå‡¦ç†
   - priorityè¨ˆç®—ã®åæ˜ 

2. **çŠ¶æ…‹æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†**
   - HPå¤‰åŒ–ã€çŠ¶æ…‹ç•°å¸¸ã€èƒ½åŠ›å¤‰åŒ–
   - å ´ã®åŠ¹æœï¼ˆå¤©å€™ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç­‰ï¼‰
   - Pokemonäº¤ä»£ãƒ»å€’ã‚Œã‚‹å‡¦ç†

3. **ãƒãƒˆãƒ«çµ‚äº†åˆ¤å®š**
   - å‹æ•—ã®ç¢ºå®š
   - çµæœãƒ‡ãƒ¼ã‚¿ã®æ•´ç†
   - ãƒªãƒ—ãƒ¬ã‚¤ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ

**æˆæœç‰©**:
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²è¡Œã‚·ã‚¹ãƒ†ãƒ 
- ã‚¤ãƒ™ãƒ³ãƒˆãƒ‰ãƒªãƒ–ãƒ³çŠ¶æ…‹ç®¡ç†
- ãƒãƒˆãƒ«çµ‚äº†å‡¦ç†

#### B.3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒ»æ¸¬å®š (1æ—¥)
**ç›®æ¨™**: ç›®æ¨™75%å‰Šæ¸›ã®é”æˆã¨æ¤œè¨¼

**ä½œæ¥­å†…å®¹**:
1. **é€šä¿¡ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æœ€é©åŒ–**
   - JSON serialization/deserializationã®æœ€é©åŒ–
   - ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°æˆ¦ç•¥
   - ç„¡é§„ãªé€šä¿¡ã®æ’é™¤

2. **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡æœ€é©åŒ–**
   - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ã®æ´»ç”¨
   - ä¸è¦ãƒ‡ãƒ¼ã‚¿ã®é©åˆ‡ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
   - GCåœ§åŠ›ã®æœ€å°åŒ–

3. **åŒ…æ‹¬çš„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**
   - WebSocket vs IPCæ¯”è¼ƒæ¸¬å®š
   - å¤§é‡ä¸¦åˆ—å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
   - é•·æ™‚é–“å®Ÿè¡Œå®‰å®šæ€§ãƒ†ã‚¹ãƒˆ

**æˆæœç‰©**:
- æœ€é©åŒ–ã•ã‚ŒãŸIPCã‚µãƒ¼ãƒãƒ¼
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒãƒ¬ãƒãƒ¼ãƒˆ
- ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### Phase C: Python-NodeJSçµ±åˆã‚·ã‚¹ãƒ†ãƒ  (4-5æ—¥)

#### C.1: IPCBattleå®Œå…¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° (2-3æ—¥)
**ç›®æ¨™**: Pokemon Showdownä»•æ§˜ã«100%æº–æ‹ ã—ãŸPythonå´å®Ÿè£…

**é‡è¦ãªçµ±åˆãƒã‚¤ãƒ³ãƒˆ**:
- ç¾åœ¨ã®IPCBattleã¯ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆ"ditto"ï¼‰ç”Ÿæˆ
- å®Ÿéš›ã®Showdownã‹ã‚‰ã®çŠ¶æ…‹ãƒ‡ãƒ¼ã‚¿åæ˜ ãŒå¿…è¦
- poke-enväº’æ›æ€§ã®å®Œå…¨ç¶­æŒ

**ä½œæ¥­å†…å®¹**:
1. **Real Battle Data Integration**
   ```python
   class IPCBattle(CustomBattle):
       def __init__(self, battle_tag, username, logger, communicator):
           # Node.jsã‹ã‚‰å®Ÿéš›ã®ãƒãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
           self._sync_battle_state_from_node()
           
       def _sync_battle_state_from_node(self):
           # BattleStreamã‹ã‚‰ã®çŠ¶æ…‹åŒæœŸ
           # å®Ÿéš›ã®Pokemonç¨®æ—ãƒ»æŠ€ãƒ»çµ±è¨ˆå€¤
           # HP, status, boostsç­‰ã®å®Œå…¨åæ˜ 
   ```

2. **Choice Action Integration** 
   ```python
   async def choose_move(self, battle):
       # Pythonå´ã®è¡Œå‹• â†’ Node.jsé€ä¿¡
       # Choice requestã®å—ä¿¡ãƒ»è§£æ
       # è¡Œå‹•çµæœã®çŠ¶æ…‹åæ˜ 
   ```

3. **Live State Synchronization**
   - ã‚¿ãƒ¼ãƒ³é€²è¡Œã®å®Œå…¨åŒæœŸ
   - ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ»å›å¾©ã®å³åº§åæ˜ 
   - çŠ¶æ…‹ç•°å¸¸ãƒ»ãƒ–ãƒ¼ã‚¹ãƒˆã®ç®¡ç†

#### C.2: Performance Integration Testing (1-2æ—¥)
**ç›®æ¨™**: æœ¬æ ¼çš„ãªè¨“ç·´ç’°å¢ƒã§ã®æ€§èƒ½æ¤œè¨¼

**æˆæœç‰©**:
- å®Œå…¨ãªãƒãƒˆãƒ«çŠ¶æ…‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- çŠ¶æ…‹æ“ä½œAPI
- ç ”ç©¶ç”¨ãƒ„ãƒ¼ãƒ«ç¾¤

#### C.2: ãƒãƒ«ãƒãƒãƒˆãƒ«ãƒ»ä¸¦åˆ—å‡¦ç†å¯¾å¿œ (1-2æ—¥)
**ç›®æ¨™**: æœ¬æ ¼çš„ãªè¨“ç·´ç’°å¢ƒã§ã®å®‰å®šå‹•ä½œ

**ä½œæ¥­å†…å®¹**:
1. **è¤‡æ•°ãƒãƒˆãƒ«åŒæ™‚ç®¡ç†**
   - ãƒãƒˆãƒ«IDç®¡ç†ã¨ãƒªã‚½ãƒ¼ã‚¹åˆ†é›¢
   - ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ãªå¤šé‡åŒ–
   - ç«¶åˆçŠ¶æ…‹ã®å›é¿

2. **ãƒ—ãƒ­ã‚»ã‚¹ãƒ—ãƒ¼ãƒ«ç®¡ç†**
   - è¤‡æ•°IPCã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹
   - è² è·åˆ†æ•£ãƒ»éšœå®³å›å¾©
   - ãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡æœ€é©åŒ–

3. **å¤§è¦æ¨¡ä¸¦åˆ—ãƒ†ã‚¹ãƒˆ**
   - 100+ç’°å¢ƒã§ã®å®‰å®šæ€§
   - ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯æ¤œå‡º
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–ã®ç›£è¦–

**æˆæœç‰©**:
- æœ¬æ ¼çš„ãªå¤šé‡åŒ–ã‚·ã‚¹ãƒ†ãƒ 
- ä¸¦åˆ—å‡¦ç†ç®¡ç†ãƒ„ãƒ¼ãƒ«
- å¤§è¦æ¨¡ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ

### Phase D: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³æº–å‚™ãƒ»æœ€çµ‚çµ±åˆ (2-3æ—¥)

#### D.1: æœ€çµ‚çµ±åˆãƒ†ã‚¹ãƒˆãƒ»ãƒã‚°ä¿®æ­£ (1-2æ—¥)
**ç›®æ¨™**: å…¨æ©Ÿèƒ½ã®çµ±åˆå‹•ä½œç¢ºèª

**ä½œæ¥­å†…å®¹**:
1. **ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ**
   - train.pyå®Œå…¨å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
   - å…¨å­¦ç¿’ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã®å‹•ä½œç¢ºèª
   - ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ç¶²ç¾…çš„ãƒ†ã‚¹ãƒˆ

2. **äº’æ›æ€§ãƒ†ã‚¹ãƒˆ**
   - æ—¢å­˜WebSocketãƒ¢ãƒ¼ãƒ‰ã¨ã®çµæœæ¯”è¼ƒ
   - å­¦ç¿’çµæœã®ä¸€è²«æ€§ç¢ºèª
   - poke-enväº’æ›æ€§ã®ç¢ºèª

3. **æœ€çµ‚ãƒã‚°ä¿®æ­£**
   - æ®‹å­˜ã™ã‚‹ä¸å…·åˆã®è§£æ±º
   - ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®å‡¦ç†
   - æ€§èƒ½å•é¡Œã®æœ€çµ‚èª¿æ•´

**æˆæœç‰©**:
- å®Œå…¨å‹•ä½œã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ 
- åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ
- ãƒã‚°ä¿®æ­£å±¥æ­´

#### D.2: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»é‹ç”¨æº–å‚™ (1æ—¥)
**ç›®æ¨™**: é‹ç”¨ãƒ»ä¿å®ˆã®ãŸã‚ã®æƒ…å ±æ•´å‚™

**ä½œæ¥­å†…å®¹**:
1. **é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
   - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»è¨­å®šæ‰‹é †
   - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹èª¿æ•´æ–¹æ³•

2. **é–‹ç™ºè€…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
   - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°èª¬æ˜
   - æ‹¡å¼µãƒ»ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³•
   - APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

3. **å“è³ªä¿è¨¼**
   - ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
   - æœ€çµ‚æ€§èƒ½æ¸¬å®š

**æˆæœç‰©**:
- å®Œå…¨ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¾¤
- é‹ç”¨ãƒ„ãƒ¼ãƒ«ãƒ»ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- å“è³ªä¿è¨¼ãƒ¬ãƒãƒ¼ãƒˆ

## ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¿æŒãƒ»ä½œæ¥­å†é–‹æˆ¦ç•¥

### å„æ®µéšã§ã®è¨˜éŒ²ã™ã¹ãæƒ…å ±

#### ä½œæ¥­é–‹å§‹æ™‚ã®è¨˜éŒ² (WORK_CONTEXT.md)
```markdown
## ç¾åœ¨ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ (æ›´æ–°æ—¥æ™‚: YYYY-MM-DD HH:MM)

### ä½œæ¥­æ®µéš
- ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚º: Phase A.2
- å®Œäº†æ¸ˆã¿: A.1 (BattleStreamåˆæœŸåŒ–ä¿®æ­£)
- æ¬¡ã®ã‚¿ã‚¹ã‚¯: Pokemonç¨®æ—ç®¡ç†ã®æ”¹å–„

### ç¾åœ¨ã®å•é¡Œç‚¹
- ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—å™¨ã§ã®"ditto" vs "Ditto"ã‚¨ãƒ©ãƒ¼
- species_mapper.pyã¨ã®çµ±åˆä¸å®Œå…¨

### æœ€æ–°ã®ãƒ†ã‚¹ãƒˆçµæœ
- ping-pongé€šä¿¡: âœ… æ­£å¸¸
- ãƒãƒˆãƒ«ä½œæˆ: âš ï¸ ç¨®æ—åã‚¨ãƒ©ãƒ¼
- ãƒ•ãƒ«IPCå®Ÿè¡Œ: âŒ timeout

### æ¬¡ã®å…·ä½“çš„ä½œæ¥­
1. src/damage/calculator.pyã®ç¨®æ—åæ­£è¦åŒ–
2. IPCBattle._create_minimal_teams()ã®æ”¹å–„
3. species_mapperçµ±åˆãƒ†ã‚¹ãƒˆ
```

#### å•é¡Œãƒ»è§£æ±ºç­–ã®è¨˜éŒ² (ISSUES_LOG.md)
```markdown
## å•é¡Œè§£æ±ºãƒ­ã‚°

### Issue #1: BattleStreamåˆæœŸåŒ–å¤±æ•— (è§£æ±ºæ¸ˆã¿)
**å•é¡Œ**: `new BattleStream()`ã§module not found
**åŸå› **: dist/sim/battle-streamã®ãƒ‘ã‚¹å•é¡Œ
**è§£æ±º**: require('../dist/sim/battle-stream')ã«ä¿®æ­£
**æ—¥æ™‚**: 2025-07-30 14:00

### Issue #2: ç¨®æ—åãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¸ä¸€è‡´ (é€²è¡Œä¸­)
**å•é¡Œ**: DamageCalculatorãŒ"ditto"ã‚’èªè­˜ã—ãªã„
**ç—‡çŠ¶**: KeyError: 'ditto' in damage calculation
**èª¿æŸ»**: species_mapperã§ã¯"Ditto"ãŒæ­£ã—ã„å½¢å¼
**æ¡ˆ**: IPCBattleã§ç¨®æ—åã‚’çµ±ä¸€å¤‰æ›
**æ—¥æ™‚**: 2025-07-30 14:30
```

#### é€²æ—è¿½è·¡ (PROGRESS.md)
```markdown
## é–‹ç™ºé€²æ—

### Phase A: åŸºç›¤ä¿®æ­£ãƒ»ãƒ†ã‚¹ãƒˆ (3-5æ—¥)
- [x] A.1.1: BattleStreamåˆæœŸåŒ–ä¿®æ­£
- [x] A.1.2: åŸºæœ¬é€šä¿¡ãƒ†ã‚¹ãƒˆ
- [ ] A.2.1: ç¨®æ—åãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆçµ±ä¸€ (é€²è¡Œä¸­ 50%)
- [ ] A.2.2: ãƒãƒ¼ãƒ ç”Ÿæˆå¤šæ§˜åŒ–
- [ ] A.2.3: çµ±è¨ˆè¨ˆç®—æœ€é©åŒ–
```

### ãƒ•ã‚¡ã‚¤ãƒ«çµ„ç¹”ãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥

#### é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```bash
# ä½œæ¥­é–‹å§‹æ™‚ã«ç¾çŠ¶ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
mkdir -p backup/$(date +%Y%m%d_%H%M%S)
cp pokemon-showdown/sim/ipc-battle-server.js backup/$(date +%Y%m%d_%H%M%S)/
cp src/sim/ipc_battle.py backup/$(date +%Y%m%d_%H%M%S)/
cp src/damage/calculator.py backup/$(date +%Y%m%d_%H%M%S)/
```

#### æ®µéšçš„ã‚³ãƒŸãƒƒãƒˆæˆ¦ç•¥
```bash
# å„æ®µéšå®Œäº†æ™‚ã«è©³ç´°ã‚³ãƒŸãƒƒãƒˆ
git add -A
git commit -m "feat(phase-a1): Fix BattleStream initialization

- Resolve module import path issues
- Add proper error handling for stream creation
- Implement basic ping-pong communication test
- Fix timeout issues in IPC communication

Phase A.1 å®Œäº†: åŸºæœ¬é€šä¿¡ç¢ºç«‹
æ¬¡ã®ä½œæ¥­: A.2 Pokemonç¨®æ—ç®¡ç†æ”¹å–„

Testing:
  âœ… ping-pong communication
  âœ… basic IPC connection
  â³ battle creation (ç§æ—åé—®é¢˜æ®‹å­˜)
"
```

### å†é–‹æ™‚ã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆæ‰‹é †

#### 1. ç¾çŠ¶ç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
#!/bin/bash
# quick-status.sh
echo "=== Current Status ==="
echo "Branch: $(git branch --show-current)"
echo "Last commit: $(git log -1 --oneline)"
echo "Modified files: $(git status --porcelain | wc -l)"
echo ""
echo "=== Latest context ==="
cat docs/WORK_CONTEXT.md | head -20
echo ""
echo "=== Quick test ==="
timeout 10s python train.py --full-ipc --episodes 1 --parallel 1 2>&1 | head -10
```

#### 2. ç’°å¢ƒå¾©å…ƒã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
#!/bin/bash
# restore-env.sh
cd /Users/takagikouichi/GitHub/Maple
git checkout feature/node-ipc-server-development
source venv/bin/activate  # if using venv
pip install -r requirements.txt
cd pokemon-showdown && npm install
echo "Environment restored. Run ./quick-status.sh for current state."
```

### å“è³ªä¿è¨¼ãƒ»ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### ç¶™ç¶šçš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
```python
# test_ipc_development.py
def test_basic_communication():
    """Phase Aå®Œäº†ã®æ¤œè¨¼"""
    assert ping_pong_test()
    assert basic_battle_creation()

def test_pokemon_species():
    """Phase A.2å®Œäº†ã®æ¤œè¨¼"""
    assert species_name_consistency()
    assert damage_calculator_integration()

def test_battle_engine():
    """Phase Bå®Œäº†ã®æ¤œè¨¼"""
    assert full_battle_execution()
    assert battle_state_synchronization()
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```bash
# performance-check.sh
echo "=== Performance baseline ==="
python train.py --profile --episodes 5 --parallel 5 | grep "env_step"
echo ""
echo "=== IPC performance ==="
python train.py --full-ipc --profile --episodes 5 --parallel 1 | grep "env_step"
```

## Pokemon Showdownæº–æ‹ æ¤œè¨¼åŸºæº–

### ğŸ¯ å®Œå…¨æº–æ‹ åŸºæº– (æœ€é‡è¦)
1. **Protocol Messageäº’æ›æ€§**:
   - [ ] SIM-PROTOCOL.mdã®å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—å¯¾å¿œ
   - [ ] Choice request formatå®Œå…¨ä¸€è‡´  
   - [ ] Battle initialization sequenceæº–æ‹ 
   - [ ] Team preview/turn progressionæ­£ç¢ºå®Ÿè£…

2. **Battle Mechanicså®Œå…¨å†ç¾**:
   - [ ] ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—100%ä¸€è‡´ï¼ˆæ—¢å­˜WebSocketã¨ã®æ¯”è¼ƒï¼‰
   - [ ] çŠ¶æ…‹ç•°å¸¸ãƒ»èƒ½åŠ›å¤‰åŒ–ã®å®Œå…¨åŒæœŸ
   - [ ] æŠ€åŠ¹æœãƒ»ç‰¹æ€§ç™ºå‹•ã®æ­£ç¢ºãªå†ç¾
   - [ ] å„ªå…ˆåº¦ãƒ»é †åºæ±ºå®šãƒ­ã‚¸ãƒƒã‚¯ä¸€è‡´

3. **Teams & Formatäº’æ›æ€§**:
   - [ ] gen9randombattleå®Œå…¨å¯¾å¿œ
   - [ ] Packed format teamsæ­£ç¢ºå‡¦ç†
   - [ ] Species/Move IDæ­£è¦åŒ–100%
   - [ ] Team validationæº–æ‹ 

### ğŸš€ æ€§èƒ½ãƒ»çµ±åˆåŸºæº–
1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™**:
   - [ ] WebSocketé€šä¿¡å®Œå…¨æ’é™¤ï¼ˆ11.7% â†’ 0%ï¼‰
   - [ ] IPCé€šä¿¡é…å»¶ <2ms
   - [ ] `python train.py --full-ipc --episodes 100 --parallel 20` å®Œå…¨å®Ÿè¡Œ
   - [ ] æ—¢å­˜å­¦ç¿’çµæœã¨ã®ä¸€è²«æ€§ (Â±3%ä»¥å†…)

2. **å®‰å®šæ€§è¦ä»¶**:
   - [ ] 1000ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰é€£ç¶šå®Ÿè¡Œ
   - [ ] ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ 0ä»¶ï¼ˆ24æ™‚é–“ï¼‰
   - [ ] ä¸¦åˆ—25ç’°å¢ƒã§ã®å®‰å®šå‹•ä½œ
   - [ ] ã‚¨ãƒ©ãƒ¼å›å¾©ãƒ¡ã‚«ãƒ‹ã‚ºãƒ å®Œå‚™

### æ®µéšåˆ¥å®Œäº†åˆ¤å®š
- **Phase Aå®Œäº†**: åŸºæœ¬IPCãƒãƒˆãƒ«1ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æˆåŠŸ
- **Phase Bå®Œäº†**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒˆãƒ«10ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æˆåŠŸ  
- **Phase Cå®Œäº†**: ä¸¦åˆ—10ç’°å¢ƒã§100ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æˆåŠŸ
- **Phase Då®Œäº†**: å…¨æˆåŠŸåŸºæº–ã‚¯ãƒªã‚¢

## ãƒªã‚¹ã‚¯ç®¡ç†ãƒ»ç·Šæ€¥å¯¾å¿œ

### é«˜ãƒªã‚¹ã‚¯é …ç›®
1. **Pokemon Showdownä¾å­˜é–¢ä¿‚**: TypeScript/JavaScriptäº’æ›æ€§å•é¡Œ
2. **ãƒ¡ãƒ¢ãƒªç®¡ç†**: Node.jsãƒ—ãƒ­ã‚»ã‚¹ãƒªãƒ¼ã‚¯
3. **ç«¶åˆçŠ¶æ…‹**: ä¸¦åˆ—å®Ÿè¡Œæ™‚ã®ãƒ‡ãƒ¼ã‚¿ç«¶åˆ

### ç·Šæ€¥å¯¾å¿œæ‰‹é †
1. **ä½œæ¥­ä¸­æ–­æ™‚**: ç¾çŠ¶ã‚’WORK_CONTEXT.mdã«è¨˜éŒ²ã€ç¾åœ¨ã®å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ
2. **å•é¡Œç™ºç”Ÿæ™‚**: ISSUES_LOG.mdã«è©³ç´°è¨˜éŒ²ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å¾©å…ƒ
3. **æœŸé™é…å»¶æ™‚**: Phaseå„ªå…ˆåº¦è¦‹ç›´ã—ã€MVPæ©Ÿèƒ½ã«é›†ä¸­

---

## ğŸ“‹ ä½œæ¥­ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### äº‹å‰æº–å‚™
- [ ] ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒä½œæˆ (`feature/node-ipc-server-development`)
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
- [ ] WORK_CONTEXT.mdåˆæœŸåŒ–
- [ ] åŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### Phase A: åŸºç›¤ä¿®æ­£ãƒ»ãƒ†ã‚¹ãƒˆ
- [ ] A.1: BattleStreamçµ±åˆä¿®æ­£
- [ ] A.2: Pokemonç¨®æ—ç®¡ç†æ”¹å–„  
- [ ] A.3: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

### Phase B: ãƒãƒˆãƒ«ã‚¨ãƒ³ã‚¸ãƒ³çµ±åˆ
- [ ] B.1: BattleStreamå®Œå…¨çµ±åˆ
- [ ] B.2: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²è¡Œã‚·ã‚¹ãƒ†ãƒ 
- [ ] B.3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### Phase C: é«˜åº¦æ©Ÿèƒ½
- [ ] C.1: çŠ¶æ…‹ä¿å­˜ãƒ»å¾©å…ƒã‚·ã‚¹ãƒ†ãƒ 
- [ ] C.2: ä¸¦åˆ—å‡¦ç†å¯¾å¿œ

### Phase D: æœ€çµ‚çµ±åˆ
- [ ] D.1: çµ±åˆãƒ†ã‚¹ãƒˆãƒ»ãƒã‚°ä¿®æ­£
- [ ] D.2: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»é‹ç”¨æº–å‚™

### æœ€çµ‚ç¢ºèª
- [ ] å…¨æˆåŠŸåŸºæº–ã‚¯ãƒªã‚¢
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™é”æˆ
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œæˆ
- [ ] é‹ç”¨æº–å‚™å®Œäº†

---

**ç·æ¨å®šå·¥æ•°**: 12-18æ—¥ (Phase A: 3-5æ—¥, B: 4-6æ—¥, C: 3-4æ—¥, D: 2-3æ—¥)  
**é–‹å§‹æ—¥**: 2025å¹´7æœˆ30æ—¥  
**ç›®æ¨™å®Œäº†æ—¥**: 2025å¹´8æœˆ15æ—¥  
**ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒ**: `feature/node-ipc-server-development`

ã“ã®ãƒ—ãƒ©ãƒ³ã«å¾“ã£ã¦æ®µéšçš„ã«å®Ÿè£…ã‚’é€²ã‚ã€å„ãƒ•ã‚§ãƒ¼ã‚ºã§ç¢ºå®Ÿã«å‹•ä½œç¢ºèªã—ãªãŒã‚‰æœ€çµ‚çš„ãªWebSocketå®Œå…¨æ’é™¤ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Œæˆã•ã›ã¾ã™ã€‚